{% extends 'core/sidebar.html' %}
{% load static %}
{% block title %}{{object}}{% endblock %}
{% block meta %}
<meta property="og:title" content="{{object.get_full_name}} en Pa'Ya">
<meta property="og:description" content="Revisa mi perfil de Pa'Ya, productos y servicios disponibles.">
<meta property="og:image" content="{{ request.scheme  }}://{#{ request.META['HTTP_HOST'] }#}{{object.profile_img.url}}">
<meta property="og:url"
    content="{{ request.scheme  }}://{#{ request.META['HTTP_HOST'] }#}{% url 'profile' object.pk %}">
<meta property="og:site_name" content="Pa'Ya">
<meta name="twitter:image:alt" content="Foto de perfil de {{object.get_full_name}} en Pa'Ya">
<meta name="twitter:card" content="summary_large_image">
{% endblock %}
{% block css %}
<link href="{% static 'core/css/cover.css' %}" rel="stylesheet">
<link href="{% static 'store/css/style.css' %}" rel="stylesheet">
<link href="{% static 'core/css/card-img-top.css' %}" rel="stylesheet">
<link href="{% static 'core/css/star.css' %}" rel="stylesheet">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script> 
{% endblock %}
{% block navbar %}
{% endblock %}
{% block content %}
{# Inicio Portada y foto de perfil #}
<div class="row my-3">
    <div class="col-md-12">
        <div class="profile-block">
            <div class="profile-block-thumb cover-container"
                style="background-image: url('{{object.store_cover_img.img_route.url}}');"></div>
            <div class="profile-img">
                <img src="{{object.store_profile_img.img_route.url}}" alt="Imagen de perfil">
            </div>
        </div>
    </div>
</div>
{# Fin Portada y foto de perfil #}
{# INICIO TARJETA PERFIL (DATOS) TIENDA #}
<div class="row px-0">
    <div class="col-12 mt-2">
        <div class="card shadow mb-4">
            <div class="card-header py-3">
                {# INICIO MENSAJES DE RETROALIMENTACION POR ACTUALIZAR PERFIL #}
                {% if 'updated' in request.GET %}
                <div class="row">
                    <div class="col-12">
                        {% if 'success' == request.GET.updated %}
                        <div class="alert w-100 alert-success alert-dismissible fade show" role="alert">
                            <strong>¡Éxito!</strong> Se han actualizado tus datos correctamente.
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        {% endif %}
                        {% if 'error' == request.GET.updated %}
                        <div class="alert w-100 alert-fluid alert-danger alert-dismissible fade show" role="alert">
                            <strong>¡Uuuups!</strong> Ha sucedido un error al actualizar los datos, intenta nuevamente.
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        {% endif %}
                    </div>
                </div>
                {% endif %}
                {# FIN MENSAJES DE RETROALIMENTACION POR ACTUALIZAR TIENDA #}
                <div class="row">
                    <div class="col-10">
                        <h2 class="m-0 font-weight-bold text-primary">{{ object.store_name }}</h2>
                        <h5>{{ object.store_description }}</h5>
                    </div>
                    {# COMPROBANDO SI EL USUARIO ES ADMINISTRADOR DE LA TIENDA, SINO NO PODRA GESTIONAR LA TIENDA, NADA MAS VER DATOS GENERALES #}
                    {# CORROBORAMOS QUE EL USUARIO SE ENCUENTRE EN LA LISTA ENVIADA DESDE LA VISTA, QUE CONTIENE EL ID DE LOS OWNERS DE LA TIENDA #}
                    {% if request.user.pk not in owners and  request.user.is_authenticated %}
                    <div class="col-md-2">
                        <form class="ml-auto" action="{% url 'ad_favorite_store' %}" method="POST">
                            {% csrf_token %}
                            <input type="hidden" value={{object.pk}} id="fav_store" name="fav_store">
                            <button class="btn btn-block btn-danger float-md-right">{% if favorite %}<i
                                    class="fas fa-heart fa-lg"></i> Siguiendo{% else %}<i
                                    class="far fa-heart fa-lg"></i> Seguir{% endif %}</button>
                        </form>
                    </div>
                    {% elif request.user.is_authenticated %}
                    <div class="col-md-2">
                        <a href="#" data-toggle="modal" data-target="#modalAgregarAnuncio" class="btn btn-primary float-right"><i
                                class="fas fa-plus"></i><strong> Crear Anuncio</strong></a>
                    </div>
                    {% elif not request.user.is_authenticated %}
                    <div class="card-body">
                        <div class="row my-3">
                            <h5 class="m-0 ml-2 text-secondary">
                                Para poder ver la información de contacto de la tienda y aprovechar Pa'Ya al máximo
                                necesitas
                                haber ingresado con una cuenta.
                            </h5>
                        </div>
                        <div class="row my-3">
                            <div class="col-2">
                                <a class="btn btn-block btn-outline-primary"
                                    href="{% url 'signup' %}?next={% url 'store_detail' object.id %}">
                                    Regístrate
                                </a>
                            </div>
                            <div class="col-2">
                                <a class="btn btn-block btn-primary"
                                    href="{% url 'login' %}?next={% url 'store_detail' object.id %}">
                                    Ingresar
                                </a>
                            </div>
                        </div>
                    </div>
                    {% endif %}
                </div>
            </div>
            {# TARJETA DE INFORMACION #}
            {% if request.user.is_authenticated %}
            <div class="card-body">
                <div class="row">
                    <div class="col-md-12 mb-2">
                        <div class="row">
                            {# VERIFICANDO QUE TENGA UN TELEFONO AGREGADO #}
                            {% if object.store_phone_number != None %}
                            <div class="col-md-6">
                                <div class="form-group my-0 py-1">
                                    <h5><strong>Número de teléfono: </strong> {{ object.store_phone_number }} </h5>
                                </div>
                            </div>
                            {% elif  request.user.pk  in owners and  request.user.is_authenticated %}
                            <div class="col-md-6">
                                <div class="form-group my-0 py-1">
                                    <h5><strong>Número de teléfono: </strong> Campo vacío </h5>
                                </div>
                            </div>
                            {% endif %}
                            {# VERIFICANDO QUE TENGA UN EMAIL AGREGADO #}
                            {% if object.store_email != None %}
                            <div class="col-md-6">
                                <div class="form-group my-0 py-1">
                                    <h5><strong>Correo electrónico: </strong> {{ object.store_email }} </h5>
                                </div>
                            </div>
                            {% elif  request.user.pk  in owners and  request.user.is_authenticated %}
                            <div class="col-md-6">
                                <div class="form-group my-0 py-1">
                                    <h5><strong>Correo electrónico: </strong> Campo vacío </h5>
                                </div>
                            </div>
                            {% endif %}
                            {# VERIFICANDO QUE TENGA UN SITIO WEB AGREGADO #}
                            {% if object.store_website != None %}
                            <div class="col-md-6">
                                <div class="form-group my-0 py-1">
                                    <h5><strong>Sitio web: </strong> {{ object.store_website }} </h5>
                                </div>
                            </div>
                            {% elif  request.user.pk  in owners and  request.user.is_authenticated %}
                            <div class="col-md-6">
                                <div class="form-group my-0 py-1">
                                    <h5><strong>Sitio web: </strong> Campo vacío </h5>
                                </div>
                            </div>
                            {% endif %}
                            <div class="col-md-6">
                                <div class="form-group my-0 py-1">
                                    <h5><strong>Ubicación: </strong> {{ object.store_location }} </h5>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group my-0 py-1">
                                    <h5><strong>En Pa'Ya desde: </strong> {{ object.date_created | date:'d-m-Y' }} </h5>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="form-group my-0 py-1">
                                    <p class="my-0 py-0">
                                        <strong>Comparte este perfil: </strong>
                                        <span
                                            id="profile_url">{{ request.scheme  }}://127.0.0.1:8000{#{ request.META['HTTP_HOST'] }#}{% url 'store_detail' object.pk %}</span>
                                        <a tabindex="0" onclick="copyLink('profile_url');" id="profile_url_copy"
                                            data-toggle="popover" title="Enlace copiado al portapapeles"
                                            data-content="Comparte el perfil en una publicación o mensaje."
                                            class="badge badge-secondary">
                                            <i class="far fa-copy"></i>
                                        </a>
                                    </p>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <a class="text-secondary" href="#" data-toggle="modal" data-target="#modalCambiarDatos">
                                    <p><i class="fas fa-edit"></i> Editar Tienda</p>
                                </a>
                            </div>
                            <div class="col-12">
                                <button type="button" class="btn btn-xs btn-sm float-md-right" >
                                    <a class="nav-link" href="#" data-toggle="modal" data-target="#modalDenunciaTienda">
                                        <span>Reportar</span>
                                        <i class="fas fa-exclamation fa-lg"></i></a>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {% if request.user.pk not in owners and  request.user.is_authenticated %}
            <div class="card-footer bg-white">
                <div class="row">
                    <div class="col-md-2 my-3">
                        <a href="#" data-toggle="modal" data-target="#modalEvaluar"
                            class="btn btn-block btn-success btn-lg ">Evaluar Tienda</a>
                    </div>
                </div>
            </div>
            {% endif %}
            {% endif %}
        </div>
    </div>
</div>
{# FIN TARJETA PERIFL (DATOS) TIENDA #}
{# CARD QUE SE MUESTRA CUANDO AUN NO HAY ANUNCIOS REALIZADOS POR LA TIENDA #}
{% if ads.count == 0 %}
<div class="row">
    <div class="col-12">
        <div class="card shadow mb-4">
            <div class="card-body">
                {% if request.user.pk in owners %}
                <h3>Aún no tienes anuncios publicados.</h3>
                <p>Si deseas vender un articulo o prestar un servicios, deberías crear un anuncio.</p>
                <p>Periodicamente se remueven anuncios para mostrar sólo los más recientes..</p>
                <a href="#" data-toggle="modal" data-target="#modalAgregarAnuncio"
                    class="btn btn-primary btn-block">Crear un anuncio</a>
                {% else %}
                <h3>{{object.store_name}} Aún no tiene anuncios publicados.</h3>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endif %}
{# FIN CARD QUE SE MUESTRA CUANDO AUN NO HAY ANUNCIOS #}
{# INICIO CARDS ANUNCIOS#}
<div class="row">
    {# INICIO MENSAJES DE RETROALIMENTACION POR CREAR UN ANUNCIO #}
    {% if 'createdAd' in request.GET %}
    <div class="col-12">
        {% if 'success' == request.GET.createdAd %}
        <div class="alert w-100 alert-success alert-dismissible fade show" role="alert">
            <strong>¡Éxito!</strong> Se han creado tu anuncio correctamente.
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        {% endif %}
        {% if 'error' == request.GET.createdAd %}
        <div class="alert w-100 alert-fluid alert-danger alert-dismissible fade show" role="alert">
            <strong>¡Uuuups!</strong> Ha sucedido un error al crear tu anuncio, intenta nuevamente.
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        {% endif %}
    </div>
    {% endif %}
    {# FIN MENSAJES DE RETROALIMENTACION POR CREAR UN ANUNCIO #}
    {# INICIO MENSAJES DE RETROALIMENTACION POR EDITAR UN ANUNCIO #}
    {% if 'updatedAd' in request.GET %}
    <div class="col-12">
        {% if 'success' == request.GET.updatedAd %}
        <div class="alert w-100 alert-success alert-dismissible fade show" role="alert">
            <strong>¡Éxito!</strong> Se han editado tu anuncio correctamente.
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        {% endif %}
        {% if 'error' == request.GET.updatedAd %}
        <div class="alert w-100 alert-fluid alert-danger alert-dismissible fade show" role="alert">
            <strong>¡Uuuups!</strong> Ha sucedido un error al editar tu anuncio, intenta nuevamente.
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        {% endif %}
    </div>
    {% endif %}
    {# FIN MENSAJES DE RETROALIMENTACION POR EDITAR UN ANUNCIO #}
    {# INICIO MENSAJES DE RETROALIMENTACION POR ELIMINAR UN ANUNCIO #}
    {% if 'deletedAd' in request.GET %}
    <div class="col-12">
        {% if 'success' == request.GET.deletedAd %}
        <div class="alert w-100 alert-success alert-dismissible fade show" role="alert">
            <strong>¡Éxito!</strong> Se han eliminado tu anuncio correctamente.
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        {% endif %}
        {% if 'error' == request.GET.deletedAd %}
        <div class="alert w-100 alert-fluid alert-danger alert-dismissible fade show" role="alert">
            <strong>¡Uuuups!</strong> Ha sucedido un error al eliminar tu anuncio, intenta nuevamente.
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        {% endif %}
    </div>
    {% endif %}
    {# FIN MENSAJES DE RETROALIMENTACION POR ELIMINAR UN ANUNCIO #}
    {# INICIO MENSAJES DE RETROALIMENTACION POR QUE EL ANUNCIO NO EXISTE #}
    {% if 'AdError' in request.GET %}
    <div class="col-12">
        {% if 'AdNotFound' == request.GET.AdError %}
        <div class="alert w-100 alert-warning alert-dismissible fade show" role="alert">
            <strong>¡Error!</strong> El anuncio no existe.
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        {% endif %}
    </div>
    {% endif %}
    {# FIN MENSAJES DE RETROALIMENTACION POR QUE EL ANUNCIO NO EXISTE #}
    <div class="col-12">
        {% if last_ads.count != 0%}
        <div class="row px-0">
            <div class="col-12 my-2">
                <div class="card border-left-info shadow">
                    <div class="card-header">
                        <div class="row">
                            <div class="col-md-8">
                                <h2 class="m-0 font-weight-bold text-info">
                                    Últimos anuncios publicados
                                </h2>
                            </div>
                            <div class="col-md-4">
                                <a href="{% url 'products_store' object.pk %}" class="btn btn-block btn-info">Ver todos</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row px-0">
            {% for data in last_ads %}
            <div class="col-md-3 col-sm-4 my-3">
                <div class="card  shadow h-100 pb-2">
                    {% if data.ad_images.count == 1 %}
                        <a href="{% url 'ad_detail' data.pk %}"><img class="card-img-top no-border-top-left" src="{{data.ad_images.first.img_route.url}}" alt="Responsive image"></a>
                    {% else %}
                    <div id="carouselAd{{ data.pk }}" class="carousel slide" data-ride="carousel">
                        <div class="carousel-inner">
                        {% for img in data.ad_images.all %}
                            <div class="carousel-item {% if forloop.first %}active{% endif %}">
                            <a href="{% url 'ad_detail' data.pk %}"><img class=" card-img-top no-border-top-left" src="{{img.img_route.url}}"  class="img-fluid" alt="Responsive image"></a>
                            </div>
                        {% endfor %}
                        </div>
                        <a class="carousel-control-prev" href="#carouselAd{{ data.pk }}" role="button" data-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                        </a>
                        <a class="carousel-control-next" href="#carouselAd{{ data.pk }}" role="button" data-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                        </a>
                    </div>
                    {% endif %}
                    <div class="card-body pb-3">
                        <h5 class="card-title"><a href="{% url 'ad_detail' data.pk %}">{{data.ad_name}}</a> </h5>
                        <h6>{% if data.id_store != None %} {{data.id_store}} {% endif %}</h6>
                        <div class="price-{{ data.id_currency.pk }}">
                        <p  class="my-0">Precio: {{ data.id_currency.currency_sign }} {{data.price|floatformat:"2"}}</p>
                        </div>
                        <div class="price-{{ data.exchange_currency.pk }}">
                        <p class="my-0">Precio: {{data.exchange_currency.currency_sign}} {{data.exchange|floatformat:"2"}}</p>
                        <p class="my-0 font-italic"><small>Precio original en {{ data.id_currency }}. Cambio al día de hoy según <a href="https://www.bch.hn/index.php" target="_blank">BCH</a>.</small></p>
                        </div>
                    </div>
                    <div class="card-footer bg-white mt-0">
                        <div class="row justify-content-end">
                            <div class="btn-toolbar" role="toolbar" aria-label="Ad buttons group">
                                <div class="btn-group mr-2" role="group" aria-label="Detail group">
                                    <a href="{% url 'ad_detail' data.pk %}" class="btn btn-light bg-white text-secondary border-0" data-toggle="tooltip" data-placement="bottom" title="Ver más">
                                        <i class="fas fa-plus"></i> {% if request.user.pk not in owners  %}Ver más{% endif %}
                                    </a>
                                {% if request.user.pk in owners  %}
                                    <a href="{% url 'ad_update' data.pk%}" class="btn btn-light bg-white text-secondary border-0" data-toggle="tooltip" data-placement="bottom" title="Editar">
                                        <i class="fas fa-edit"></i> 
                                    </a>
                                    <a href="#" ad="{{data.pk}}" ad-name = "{{data.ad_name}}" data-toggle="modal" data-target="#modalEliminarAnuncio" data-toggle="tooltip" data-placement="bottom" title="Eliminar" class="btn btn-light bg-white text-secondary border-0 btn-delete">
                                        <i class="fas fa-trash"></i>
                                    </a>
                                </div>
                                <div class="btn-group mr-2" role="group" aria-label="All group">
                                    <div class="dropdown no-arrow">
                                        <button class="btn btn-light bg-white text-secondary border-0 dropdown-toggle no-arrow float-right" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        <i class="fas fa-bars"></i>
                                        </button>
                                        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                            <a href="{% url 'ad_detail' data.pk %}" class="dropdown-item text-secondary">
                                                <i class="fas fa-plus"></i> Ver más
                                            </a>
                                            <a href="{% url 'ad_update' data.pk%}" class="dropdown-item text-secondary">
                                                <i class="fas fa-edit"></i> Editar
                                            </a>
                                            <a href="#" ad="{{data.pk}}" ad-name = "{{data.ad_name}}" data-toggle="modal" data-target="#modalEliminarAnuncio" class="dropdown-item text-secondary btn-delete">
                                                <i class="fas fa-trash"></i> Eliminar
                                            </a>                                         
                                        </div>
                                    </div>
                                {% endif %}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% endif %}
    </div>
</div>
{# FIN Card anuncio #}
{# INICIO MODAL DENUNCIAS #}
        {% if request.user.is_authenticated %}
        <div class="modal fade" id="modalDenunciaTienda" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-scrollable" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <a class="text-decoration-none d-flex" href="{% url 'home' %}">
                        <div class="sidebar-brand-icon rotate-n-15">
                        <i class="fab fa-product-hunt"></i>
                        </div>
                        <div class="sidebar-brand-text mx-0 display-5 font-weight-bold ">Pa'Ya</div>
                        </a>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <p>
                            <h1> Denunciar contenido ofensivo, ilegal u otros</h1>
                            Este formulario de reporte te permite denunciar contenido ilegal o inadecuado que encuentres en las tiendas de Pa'Ya 
                            o en los productos anunciados en la tienda. No podemos asegurarte que vayas a recibir una respuesta, 
                            pero utilizaremos tus comentarios para mejorar nuestros productos y servicios.
                        </p>
                        <form action="{% url 'complaint_store' %}" method="POST" enctype="multipart/form-data">
                            {% csrf_token %}
                            <input type="number" value="{{ object.pk }}" hidden name="id_indicatedStore">
                            <div class="form-group">
                              <div class="form-group">
                                <label for="exampleFormControlSelect1">Que problema presenta la tienda?</label>
                                <select class="form-control" id="id_electionStore" name="id_electionStore">
                                  <option value="">Elige una opción</option>
                                  <option>Contenido Inadecuado</option>
                                  <option>Poca informacion</option>
                                  <option>Imagenes de producto borrosas</option>
                                  <option>Informacion falsa</option>
                                  <option>Otro</option>
                                </select>
                              </div>                   
                            </div>
                            <div class="form-group">
                              <label for="id_commentStore" class="text-muted">En caso que el problema sea otro al de los mencionados, por favor especifica el problema en la casilla
                                de comentarios</label>
                              <textarea class="form-control" rows="2" required name="id_commentStore" placeholder="Espefica mas tu problema"></textarea>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                                <button type="submit" class="btn btn-primary">Enviar Denuncia</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        {% else %}
        <div class="modal fade" id="modalDenu" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Que problema tienes</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <p>Registrate o Ingresa si quieres denunciar o reportar algo</p>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <a class="btn btn-success" href="{% url 'signup' %}" >Regístrate</a>
                <a href="{% url 'login' %}" class="btn btn-primary" >Ingresar</a>
              </div>
            </div>
          </div>
        </div>
        {% endif %}
{# FIN MODAL DENUNCIAS #}  
{# MODAL ACTUALIZAR DATOS #}
<div class="modal fade" id="modalCambiarDatos" tabindex="-1" role="dialog" aria-labelledby="modalCambiarDatosLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Edita los datos de tu tienda</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <form action="{% url 'up_store' %}" method="post" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="form-group my-0 py-1">
                                <input type="hidden" id="id_store" name="id_store" value="{{ object.pk }}">
                                <label for="id_first_name" class="text-muted">Nombre</label>
                                <input placeholder="{{ object.store_name }}" value="{{ object.store_name }}" type="text"
                                    name="store_name" maxlength="50" required class="form-control" id="id_store_name">
                            </div>
                        </div>
                    </div>
                    <div class="form-group my-0 py-1">
                        <label for="id_address" class="text-muted">Descripción</label>
                        <textarea class='form-control' name="store_description" rows="2" required id="id_address"
                            placeholder="{{ object.store_description }}">{{ object.store_description }}</textarea>
                    </div>
                    <div class="form-group my-0 py-1">
                        <label for="id_store_phone_number" class="text-muted">Número de teléfono:</label>
                        <input {% if object.store_phone_number != None %} placeholder="{{ object.store_phone_number }}" value="{{ object.store_phone_number }}" {% else %} placeholder="Por Ejemplo: 99999999" {% endif %} type="text"
                                    name="store_phone_number" maxlength="20"  class="form-control" id="id_store_phone_number">
                    </div>
                    <div class="form-group my-0 py-1">
                        <label for="id_store_email" class="text-muted">Correo electrónico:</label>
                        <input {% if object.store_email != None %} placeholder="{{ object.store_email }}" value="{{ object.store_email }}" {% else %} placeholder="Por Ejemplo: juan@paya.com" {% endif %} type="text"
                                    name="store_email" maxlength="100" class="form-control" id="id_store_email">
                    </div>
                    <div class="form-group my-0 py-1">
                        <label for="id_store_website" class="text-muted">Sitio web:</label>
                        <input {% if object.store_website != None %} placeholder="{{ object.store_website }}" value="{{ object.store_website }}" {% else %} placeholder="Por Ejemplo: www.tutienda.com" {% endif %} type="text"
                                    name="store_website" maxlength="60"  class="form-control" id="id_store_website">
                    </div>
                    <div class="form-group my-0 py-1">
                        <label for="id_location">Ubicación</label>
                        <select class="form-control" name="store_location" id="id_location" required>
                            <option value="" disabled selected>Lugar</option>
                            {% for location in locations %}
                            <option value="{{location.pk}}" {% if location.pk == object.store_location.pk %} selected
                                {% endif %}>{{location}}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="form-group my-0 py-1">
                        <label for="id_images" class="text-muted">Imágenes:</label>
                        <div class="custom-file">
                            <input type="file" class="custom-file-input" id="id_store_profile_img"
                                name="store_profile_img" accept="image/*">
                            <label class="custom-file-label" for="id_profile_img">Foto de perfil</label>
                        </div>
                    </div>
                    <div class="form-group my-0 py-1">
                        <div class="custom-file">
                            <input type="file" class="custom-file-input" id="id_store_profile_img"
                                name="store_cover_img" accept="image/*">
                            <label class="custom-file-label" for="id_profile_img">Foto de portada</label>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Guardar</button>
                </div>
            </form>
        </div>
    </div>
</div>
{# FIN MODAL ACTUALIZAR DATOS #}
{# INICIO MODAL EVALUAR TIENDA#}
<div class="modal fade" id="modalEvaluar" tabindex="-1" role="dialog" aria-labelledby="modalEvaluarLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <a href="{% url 'home' %}" class="text-decoration-none">
                    <h1 class="font-weight-bold font-italic display-4"><span class="text-primary">Pa</span><span
                            class="text-success">’Ya</span></h1>
                </a>
                <h5 class="modal-title" id="exampleModalLabel">Rating Store</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <form action="{% url 'rate_store' %}" method="POST">
                {% csrf_token %}
                <input type="number" value="{{ object.pk }}" hidden name="id_evaluated_store">
                <div class="modal-body">
                    <div class="row justify-content-md-center py-4">
                        <a href="#" class="px-3 py-1 star star-1"><i class="far fa-star text-warning"></i></a>
                        <a href="#" class="px-3 py-1 star star-2"><i class="far fa-star text-warning"></i></a>
                        <a href="#" class="px-3 py-1 star star-3"><i class="far fa-star text-warning"></i></a>
                        <a href="#" class="px-3 py-1 star star-4"><i class="far fa-star text-warning"></i></a>
                        <a href="#" class="px-3 py-1 star star-5"><i class="far fa-star text-warning"></i></a>
                        <span>Que tan satifecho(a) estas con la tienda</span>
                    </div>
                    <input type="number" name="id_points_store" id="stars" hidden="True" readonly="true" value=0>
                    <div class="form-group">
                        <label for="id_comment" class="text-muted"></label>
                        <textarea class='form-control' rows="2" required name="id_comment_store"
                            placeholder="Comentario"></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Evaluar Tienda</button>
                </div>
            </form>
        </div>
    </div>
</div>
{# FIN MODAL EVALUAR TIENDA #}
{# INICIO MODAL CREAR ANUNCIO #}
<div class="modal fade" id="modalAgregarAnuncio" tabindex="-1" role="dialog" aria-labelledby="modalAgregarAnuncio"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Creando anuncio {{ object.store_name }}</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <form action="{% url 'ad_create' %}" method="post" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="form-group my-0 py-1">
                                {# OBTENIENDO LA DIRECCION DESDE DONDE SE HACE LA PETICION, PARA SER REENVIADO AQUI NUEVAMENTE #}
                                <input type="hidden" id="next_url" name="next_url" value="{% url 'store_detail' object.pk  %}">
                                {# ID DE TIENDA DE TIPO HIDDEN #}
                                <input type="hidden" id="id_store" name="id_store" value="{{ object.pk }}">
                                <label for="id_ad_name" class="text-muted">Nombre</label>
                                <input required type="text" class="form-control" name="ad_name" id="id_ad_name"
                                    placeholder="Nombre del anuncio" maxlength="100">
                            </div>
                        </div>
                    </div>
                    <div class="form-group my-0 py-1">
                        <label for="id_ad_description" class="text-muted">Descripción</label>
                        <textarea required aria-describedby="help_ad_description" class="form-control" rows="3"
                            name="ad_description" id="id_ad_description"
                            placeholder="Describe tu producto o servicio"></textarea>
                        <small id="help_ad_description" class="form-text text-muted">Tu información de contacto se
                            incluirá por defecto, si lo deseas, puedes incluir más detalles sobre tu anuncio
                            aquí.</small>
                    </div>
                    <div class="form-group my-0 py-1">
                        <label for="id_location">Ubicación</label>
                        <select class="form-control" name="id_location" id="id_id_location" required>
                            <option value="" disabled selected>Lugar</option>
                            {% for location in locations %}
                            <option value="{{location.pk}}" {% if location.pk == object.store_location.pk %} selected
                                {% endif %}>{{location}}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group my-0 py-1">
                                <label for="id_price" class="text-muted">Precio</label>
                                <input required type="number" class="form-control" name="price" id="id_price"
                                    placeholder="Precio" step="any">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group my-0 py-1">
                                <label for="id_currency" class="text-muted">Moneda</label>
                                <select class="form-control" name="id_currency" id="id_id_currency">
                                    {% for currency in currencies %}
                                    <option value="{{currency.pk}}">{{currency.currency_sign}}</option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <label for="id_ad_kind" class="text-muted">Tipo de anuncio</label>
                            <select class="form-control" name="id_ad_kind" id="id_id_ad_kind">
                                <option value="" disabled selected>Tipo de anuncio</option>
                                {% for kind in ad_kinds %}
                                <option value="{{kind.pk}}">{{kind}}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="id_id_category" class="text-muted">Categoria</label>
                                <select required placeholder="Categoría" class="form-control" name="id_category"
                                    id="id_id_category">
                                    <option value="" disabled selected>Categoría</option>
                                    {% for category in categories %}
                                    <option value="{{category.pk}}">{{category}}</option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12">
                            <div class="custom-file">
                                <input type="file" multiple class="custom-file-input" id="id_images" name="images"
                                    accept="image/*" aria-describedby="help_images" required>
                                <label class="custom-file-label" for="id_images">Fotos</label>
                                <small id="help_images" class="form-text text-muted">Puedes seleccionar varias fotos, si
                                    usas un ordenador puedes arrastrarlas aquí.</small>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Guardar</button>
                </div>
            </form>
        </div>
    </div>
</div>
{# FIN MODAL CREAR ANUNCIO #}
{# INICIO MODAL ELIMINAR ANUNCIO #}
{% if request.user.pk in owners %}
<div class="modal fade" id="modalEliminarAnuncio" tabindex="-1" role="dialog" aria-labelledby="modalEliminarAnuncio"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">¿Estás seguro de eliminar <span id="span_ad_name"></span>?</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <form action="{% url 'ad_delete' %}" method="post">
                {% csrf_token %}
                <div class="modal-body">
                    {# OBTENIENDO LA DIRECCION DESDE DONDE SE HACE LA PETICION, PARA SER REENVIADO AQUI NUEVAMENTE #}
                    <input type="hidden" id="next_url" name="next_url" value="{% url 'store_detail' object.pk  %}">
                    {# OBTENIENDO EL ID DE ANUNCIO #}
                    <input type="hidden" id="id_ad_delete" name="id_ad" value="-1">
                    <p>Selecciona porque lo quieres eliminar.</p>
                    <div class="form-group my-0 py-1 custom-control custom-radio custom-control-inline">
                        <input type="radio" id="customRadioInline1" name="delete" class="custom-control-input" value="0"
                            required>
                        <label class="custom-control-label" for="customRadioInline1">Lo he vendido.</label>
                    </div>
                    <div class="form-group my-0 py-1 custom-control custom-radio custom-control-inline">
                        <input type="radio" id="customRadioInline2" name="delete" class="custom-control-input" value="1"
                            required>
                        <label class="custom-control-label" for="customRadioInline2">Ya no quiero mostrarlo.</label>
                    </div>
                </div>
                <div class="card-footer mt-0">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
                    <button type="submit" class="btn btn-danger" >Eliminar anuncio</button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endif %}
{# FIN MODAL ELIMINAR ANUNCIO #}
{% endblock %}
{% block js %}
<script src="{% static 'core/js/file-label-change.js' %}"></script>
<script src="{% static 'core/js/max-date-today.js' %}"></script>
<script src="{% static 'core/js/collapse-sidebar.js' %}"></script>
<script src="{% static 'core/js/profile.js' %}"></script>
<script src="{% static 'core/js/custom.js' %}"></script>
<script src="{% static 'core/js/rate-star.js' %}"></script>
{% endblock %}